# StandX 交易脚本使用说明

## 安装依赖

脚本需要以下 Python 包：

```bash
pip install web3 eth-account
```

或者安装所有依赖：

```bash
pip install -r ../../../requirements.txt
```

## 使用方法

### 基本用法

```bash
cd exchange/exchange_standx/tests
python run_trade.py --private-key YOUR_PRIVATE_KEY
```

### 完整参数

```bash
python run_trade.py \
  --private-key YOUR_PRIVATE_KEY \
  --chain bsc \
  --symbol BTC-USD \
  --side buy \
  --qty 0.001 \
  --price 80000
```

### 参数说明

- `--private-key`: **必需**，钱包私钥（hex 格式，带或不带 0x 前缀）
- `--chain`: 链类型，可选 `bsc` 或 `solana`（默认: `bsc`）
- `--symbol`: 交易对（默认: `BTC-USD`）
- `--side`: 订单方向，可选 `buy` 或 `sell`（默认: `buy`）
- `--qty`: 订单数量（默认: `0.001`）
- `--price`: 订单价格（默认: `80000`）
- `--dry-run`: 仅查询余额，不下单

### 示例

#### 1. 查询余额并下单 0.001 BTC @ 80000

```bash
python run_trade.py --private-key 0x你的私钥
```

#### 2. 仅查询余额（不下单）

```bash
python run_trade.py --private-key 0x你的私钥 --dry-run
```

#### 3. 自定义参数下单

```bash
python run_trade.py \
  --private-key 0x你的私钥 \
  --symbol ETH-USD \
  --side sell \
  --qty 0.1 \
  --price 3000
```

## 安全提示

⚠️ **重要**: 
- 不要将私钥提交到版本控制系统
- 建议使用环境变量传递私钥
- 私钥格式：hex 字符串，可以带或不带 `0x` 前缀

### 使用环境变量（推荐）

```bash
export STANDX_PRIVATE_KEY="0x你的私钥"
python run_trade.py --private-key "$STANDX_PRIVATE_KEY"
```

## 脚本功能

1. **认证**: 使用钱包私钥进行 StandX API 认证
2. **查询余额**: 获取账号的完整余额信息
3. **下单**: 提交限价单（默认 0.001 BTC @ 80000）

## 输出示例

```
============================================================
StandX 交易脚本
============================================================
✓ 已创建认证实例
✓ 已创建 HTTP 客户端
✓ 钱包地址: 0x1234...

------------------------------------------------------------
步骤 1: 进行认证...
------------------------------------------------------------
✓ 认证成功
  Token: abc123...
  地址: 0x1234...
  链: bsc

------------------------------------------------------------
步骤 2: 查询账号余额...
------------------------------------------------------------
✓ 余额查询成功
  总资产: 1000.0
  账户权益: 1000.0
  可用余额: 1000.0
  已用保证金: 0.0
  锁定金额: 0.0
  未实现盈亏: 0.0

------------------------------------------------------------
步骤 3: 下单...
------------------------------------------------------------
  交易对: BTC-USD
  方向: buy
  数量: 0.001
  价格: 80000
✓ 下单成功
  请求ID: xxx-xxx-xxx
  消息: success

============================================================
完成！
============================================================
```
